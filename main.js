(()=>{"use strict";var e=document.querySelectorAll(".popup"),t=document.querySelectorAll(".popup__btn-escape"),r=function(e){e.classList.add("popup_opened"),document.addEventListener("keydown",u)},n=function(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",u)},o=function(e){e.target.classList.contains("popup")&&n(e.target)},u=function(e){"Escape"==e.key&&n(document.querySelector(".popup_opened"))};t.forEach((function(e){e.addEventListener("click",(function(){n(e.closest(".popup"))}))})),e.forEach((function(e){e.addEventListener("click",o)}));var s=document.querySelector(".elements__list"),c=document.querySelector("#element").content.querySelector(".element"),l=document.querySelector(".popup__image"),a=document.querySelector(".popup__caption"),i=document.querySelector(".popup_picture"),p=function(e){e.target.closest(".element").remove()},d=function(e){e.target.classList.toggle("element__button-heart_active")},m=function(e){s.prepend(function(e){var t=c.cloneNode(!0),n=t.querySelector(".element__image");return t.querySelector(".element__title").textContent=e.name,n.src=e.link,n.alt=e.name,t.querySelector(".element__button-trash").addEventListener("click",p),t.querySelector(".element__button-heart").addEventListener("click",d),n.addEventListener("click",(function(){return function(e){l.src=e.link,l.alt=e.name,a.textContent=e.name,r(i)}(e)})),t}(e))},_=function(e,t,r){var n=r.inputErrorClass,o=r.errorClass,u=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(n),u.classList.remove(o),u.textContent=""},v=function(e){return e.some((function(e){return!e.validity.valid}))},f=document.querySelector(".popup__input_place"),y=document.querySelector(".popup__input_url"),S=document.querySelector(".popup__input_name"),C=document.querySelector(".popup__input_text"),q=document.querySelector(".profile__edit-button"),E=document.querySelector(".profile__add-button"),b=document.querySelector(".popup__form_add-card"),k=document.querySelector(".popup__form_edit-profile"),L=document.querySelector(".profile__title"),h=document.querySelector(".profile__subtitle"),g=document.querySelector(".popup_edit-profile"),x=document.querySelector(".popup_add-card"),A=document.querySelector(".popup__btn_submit"),B=document.querySelector(".popup__btn_save"),j="popup__input_type_error",w="form__input-error_active";E.addEventListener("click",(function(){A.classList.add("popup__btn_inactive"),A.setAttribute("disabled",!0),f.value="",y.value="",_(b,f,{inputErrorClass:j,errorClass:w}),_(b,y,{inputErrorClass:j,errorClass:w}),r(x)})),q.addEventListener("click",(function(){S.value=L.textContent,C.value=h.textContent,B.classList.remove("popup__btn_inactive"),A.removeAttribute("disabled"),_(k,S,{inputErrorClass:j,errorClass:w}),_(k,C,{inputErrorClass:j,errorClass:w}),r(g)})),k.addEventListener("submit",(function(e){e.preventDefault(),L.textContent=S.value,h.textContent=C.value,n(g)})),b.addEventListener("submit",(function(e){e.preventDefault();var t={name:f.value,link:y.value};m(t),n(x)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].reverse().forEach((function(e){return m(e)})),function(e){var t=e.formSelector,r=e.inputSelector,n=e.submitButtonSelector,o=e.inactiveButtonClass,u=e.inputErrorClass,s=e.errorClass;Array.from(document.querySelectorAll(t)).forEach((function(e){!function(e,t){var r=t.inputSelector,n=t.submitButtonSelector,o=t.inactiveButtonClass,u=t.inputErrorClass,s=t.errorClass,c=Array.from(e.querySelectorAll(r)),l=e.querySelector(n);c.forEach((function(t){t.addEventListener("input",(function(){!function(e,t,r){var n=r.inputErrorClass,o=r.errorClass;t.validity.valid?_(e,t,{inputErrorClass:n,errorClass:o}):function(e,t,r,n){var o=n.inputErrorClass,u=n.errorClass,s=e.querySelector(".".concat(t.id,"-error"));t.classList.add(o),s.textContent=r,s.classList.add(u)}(e,t,t.validationMessage,{inputErrorClass:n,errorClass:o})}(e,t,{inputErrorClass:u,errorClass:s}),function(e,t,r){console.log(v(e)),v(e)?(t.classList.add(r),t.setAttribute("disabled",!0)):(t.classList.remove(r),t.removeAttribute("disabled"))}(c,l,o)}))}))}(e,{formSelector:t,inputSelector:r,submitButtonSelector:n,inactiveButtonClass:o,inputErrorClass:u,errorClass:s})}))}({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__btn",inactiveButtonClass:"popup__btn_inactive",inputErrorClass:j,errorClass:w})})();